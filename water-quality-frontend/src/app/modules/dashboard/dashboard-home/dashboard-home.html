<app-navbar></app-navbar>

<div class="page">
  <div class="header-container">
    <h2>Dashboard Overview</h2>
    <span class="date-badge">{{ latestReading?.timestamp | date : 'medium' }}</span>
  </div>

  <div
    class="status-card"
    *ngIf="latestReading"
    [ngClass]="{
      'bg-green': latestReading.quality === 'Good',
      'bg-yellow': latestReading.quality === 'Moderate',
      'bg-red': latestReading.quality === 'Poor'
    }"
  >
    <div class="status-left">
      <h3>Current Status</h3>
      <h1 class="big-status">{{ latestReading.quality }}</h1>
      <p class="location-text">
        <i class="fas fa-map-marker-alt"></i> {{ latestReading.location }}
      </p>
    </div>

    <div class="status-grid">
      <div class="stat-item">
        <span class="label">pH Level</span>
        <span class="value">{{ latestReading.ph }}</span>
      </div>
      <div class="stat-item">
        <span class="label">Turbidity</span>
        <span class="value">{{ latestReading.turbidity }} NTU</span>
      </div>
      <div class="stat-item">
        <span class="label">TDS</span>
        <span class="value">{{ latestReading.tds }} ppm</span>
      </div>
    </div>
  </div>

  <div class="dashboard-grid">
    <div class="dashboard-card">
      <h3>Overall Quality Ratio</h3>

      <div class="chart-container">
        <canvas id="qualityChart"></canvas>
      </div>
    </div>

    <div class="dashboard-card">
      <h3>Critical Alerts Trend</h3>

      <div class="chart-container">
        <canvas id="trendChart"></canvas>
      </div>
    </div>
  </div>
</div>
